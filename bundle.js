(()=>{var t={282:()=>{"use strict";(()=>{const t=document.querySelector(".form__control--file"),e=["gif","jpg","jpeg","png"];t.addEventListener("change",(function(t){const o=t.target.files[0],n=o.name.toLowerCase();if(e.some((t=>n.endsWith(t)))){const t=new FileReader;t.onload=function(t){const e=t.target.result;window.fabric.Image.fromURL(e,(function(t){const e=t.set({left:20,top:20,angle:"00"}).scale(.3);window.canvas.canvas.add(e).renderAll(),window.robo.say("Отличный выбор!")}))},t.readAsDataURL(o)}}))})()},468:()=>{"use strict";(()=>{const t=document.querySelector(".form__control--color");const e=new window.fabric.Canvas("canvas",{width:282,height:376,backgroundColor:"#b744d4"});t.addEventListener("change",(()=>{e.backgroundColor=t.value,e.renderAll(),window.modifyText.updateDataWithImage()})),window.canvas={canvas:e}})()},346:()=>{"use strict";(()=>{const t=document.querySelector(".export-buttons__button--clipboard"),e=document.querySelector(".form__control--export-html"),o=document.querySelector(".export-buttons__button--to-json"),n=(t,e)=>{navigator.clipboard.writeText(t).then((()=>{if("скопировано!"!==e.innerText){const t=e.innerText;e.innerText="скопировано!",setTimeout((()=>{e.innerText=t}),1500)}})).catch((t=>{window.robo.say("Something went wrong"+t)}))};t.addEventListener("click",(()=>{((t,e)=>{const o=t.value.trim();o&&n(o,e)})(e,t)})),o.addEventListener("click",(()=>{const t=(()=>{const t={html:window.clipboard.inputBannerHTML.textContent};return JSON.stringify(t)})();n(t,o)})),window.clipboard={inputBannerHTML:e}})()},145:()=>{"use strict";window.gradient={createGradient:()=>{const t=new window.fabric.Gradient({type:"linear",coords:{x1:0,y1:0,x2:window.canvas.canvas.width,y2:window.canvas.canvas.height},colorStops:[{color:"rgb(166,111,213)",offset:0},{color:"rgba(106, 72, 215, 0.5)",offset:.5},{color:"#200772",offset:1}]});window.canvas.canvas.backgroundColor=t.toLive(window.canvas.canvas.contextContainer),window.canvas.canvas.renderAll()}}},653:function(t,e,o){var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof o.g&&o.g.global===o.g?o.g:this;function r(t,e,o){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){c(n.response,e,o)},n.onerror=function(){console.error("could not download file")},n.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function a(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(o){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var s=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(t,e,o){var s=n.URL||n.webkitURL,c=document.createElement("a");e=e||t.name||"download",c.download=e,c.rel="noopener","string"==typeof t?(c.href=t,c.origin!==location.origin?i(c.href)?r(t,e,o):a(c,c.target="_blank"):a(c)):(c.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){a(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,o){if(e=e||t.name||"download","string"==typeof t)if(i(t))r(t,e,o);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout((function(){a(n)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,o),e)}:function(t,e,o,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return r(t,e,o);var a="application/octet-stream"===t.type,c=/constructor/i.test(n.HTMLElement)||n.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&c||s)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},d.readAsDataURL(t)}else{var w=n.URL||n.webkitURL,u=w.createObjectURL(t);i?i.location=u:location.href=u,i=null,setTimeout((function(){w.revokeObjectURL(u)}),4e4)}});n.saveAs=c.saveAs=c,t.exports=c},12:()=>{"use strict";(()=>{const t="Кликни — \nи двигай \nтекст!",e=10,o=110,n=141,r=188,i="https://www.avito.st/s/app/i/story-previews/story-51/preview@2x.jpg",a="https://avito.ru",s=2,c=document.querySelector(".form__control--banner-text"),l=document.querySelector(".form__control--link"),d=document.querySelector(".preview__html-container"),w=document.querySelector(".form__control--export-data-url");let u=a,p=t,v=e,f=o,m=i;const g=()=>{window.canvas.canvas.remove(window.text.text);const t=window.canvas.canvas.toDataURL({format:"png",quality:1});return window.canvas.canvas.add(window.text.text),t};let b=g();const x=()=>{window.clipboard.inputBannerHTML.textContent=(()=>{const t=p.replace(/\n/g,"<br>"),e=p.replace(/\n/g," ");return`<a href="${u}" style="color: white">\n  <div class="story-previewer-preview-2LCEH story-previewer-viewed-1bSIJ" style="position: relative; display: inline-block; overflow: hidden">\n    <img width="${n}" height="${r}" src="${m}" style="border-radius: 8px"\n        class="story-previewer-image-pkKji" alt="${e}">\n    <div class="story-previewer-title-eJkxt" style="position: absolute; top: ${f}px; left: ${v}px; font-size: 18px; line-height: 21px; width: 141px">${t}</div>\n  </div>\n</a>`})()};x();const h=t=>{w.textContent=(t=>{t&&(b=g());const e=p.replace(/\n/g,"<br>"),o=p.replace(/\n/g," ");return`<a href="${u}" style="color: white">\n  <div class="story-previewer-preview-2LCEH story-previewer-viewed-1bSIJ" style="position: relative; display: inline-block; overflow: hidden">\n    <img width="${n}" height="${r}" src="${b}" style="border-radius: 8px"\n        class="story-previewer-image-pkKji" alt="${o}">\n    <div class="story-previewer-title-eJkxt" style="position: absolute; top: ${f}px; left: ${v}px; font-size: 18px; line-height: 21px; width: 141px">${e}</div>\n  </div>\n</a>`})(t)};h();const y=()=>{window.util.removeNodeChild(d),d.insertAdjacentHTML("afterbegin",w.textContent)};y();const _=()=>{x(),h(!0),y()},L=window.util.debounce((()=>{x(),h(),y()})),S=window.util.debounce(_);window.canvas.canvas.on("mouse:move",(t=>{t.target&&("text"===t.target.type?(t.target.left>n*s?t.target.left=n*s-20:t.target.left<0&&(t.target.left=0),t.target.top>r*s?t.target.top=r*s-20:t.target.top<0&&(t.target.top=0),v=t.target.left/s,f=t.target.top/s,L()):"image"===t.target.type&&S())})),window.canvas.canvas.on("text:changed",(t=>{let e=t.target.text.split("\n");e.length>3&&(e=e.slice(0,3)),t.target.text=e.join("\n"),c.value=t.target.text,p=t.target.text,L()})),c.addEventListener("input",(()=>{let t=c.value.split("\n");t.length>3?(c.setCustomValidity("Для этого макета доступно только 3 строки"),window.robo.say("Только 3 строки..."),t=t.slice(0,3)):c.setCustomValidity(""),c.value=t.join("\n"),c.reportValidity(),window.canvas.canvas.remove(window.text.text),window.text.text.text=c.value,window.canvas.canvas.add(window.text.text),p=c.value,L()})),l.addEventListener("input",(()=>{u=l.value,L()})),window.modifyText={updateDataWithImage:_}})()},520:()=>{"use strict";(()=>{const t=document.querySelector(".promo__robo-text"),e=document.querySelector(".robo__flashes"),o=document.querySelector(".preview__info-btn"),n=o=>{t.textContent=o,t.classList.remove("promo__robo-text--animation"),e.classList.remove("robo__flashes--animation"),t.offsetWidth,t.classList.add("promo__robo-text--animation"),e.classList.add("robo__flashes--animation")};setTimeout((()=>{n("создадим баннер!")}),4e3),o.addEventListener("click",(()=>{n("Текст можно двигать!")})),window.robo={say:n}})()},374:()=>{"use strict";(()=>{const t=document.querySelector(".export-buttons__control--with-text"),e=document.querySelector(".export-buttons__button--save-as-png"),o=document.querySelector(".preview__canvas");let n=!1;const r=()=>{window.canvas.canvas.getActiveObject()&&window.canvas.canvas.discardActiveObject().renderAll(),o.toBlob((t=>{window.saveAs(t,"preview.png")}))},i=()=>{window.text.text.set("fill","white"),window.canvas.canvas.requestRenderAll()};t.addEventListener("change",(()=>{n=t.checked})),e.addEventListener("click",(()=>{n?r():(window.text.text.set("fill","transparent"),window.canvas.canvas.requestRenderAll(),setTimeout(r,100),setTimeout(i,100)),window.robo.say("Изображение готово!")}))})()},871:()=>{"use strict";(()=>{const t=document.querySelector(".export-buttons__show-config--link"),e=document.querySelector(".export-buttons__show-config--data-uri"),o=document.querySelector(".export-buttons__textarea-item--export-html"),n=document.querySelector(".export-buttons__textarea-item--export-data-url"),r=(t,e,o,n)=>{const r=t.classList.contains("export-buttons__textarea-item--hidden"),i=o.classList.contains("export-buttons__show-config--hidden");r&&i&&(t.classList.remove("export-buttons__textarea-item--hidden"),e.classList.add("export-buttons__textarea-item--hidden"),o.classList.remove("export-buttons__show-config--hidden"),n.classList.add("export-buttons__show-config--hidden"))};t.addEventListener("click",(()=>{r(o,n,t,e)})),e.addEventListener("click",(()=>{r(n,o,e,t)}))})()},527:()=>{"use strict";(()=>{const t="Кликни — \nи двигай \nтекст!",e=10,o=110,n=2,r=new window.fabric.Text(t,{left:e*n,top:o*n,fill:"white",fontSize:36,lineHeight:1.16,fontFamily:"Roboto"});r.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1,tr:!1,tl:!1,br:!1,bl:!1,mtr:!1}),window.canvas.canvas.add(r),window.text={text:r}})()},495:()=>{"use strict";window.util={removeNodeChild:t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},debounce:t=>{let e;return(...o)=>{e&&window.clearTimeout(e),e=window.setTimeout((()=>{t(...o)}),500)}}}}},e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,o),r.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o(653),o(495),o(468),o(527),o(374),o(282),o(346),o(12),o(520),o(871),o(145)})();